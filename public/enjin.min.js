!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){window.enjin={version:"0.2508",defaultDelay:1e3/60,attach:function(a){this.canvas=a,this.width=a.width||0,this.height=a.height||0,this.ctx=this.canvas.getContext("2d"),this.currentState={update:function(a){},render:function(a){}}},start:function(){enjin.previous=performance.now(),enjin.frameID=requestAnimFrame(enjin.loop),enjin.currentState.resume&&enjin.currentState.resume()},loop:function(){enjin.now=performance.now(),enjin.dt=(enjin.now-enjin.previous)/1e3||0,enjin.previous=enjin.now,enjin.timer.updateAll(enjin.dt),enjin.ctx.save(),enjin.ctx.setTransform(1,0,0,1,0,0),enjin.ctx.clearRect(0,0,enjin.width,enjin.height),enjin.ctx.restore(),enjin.currentState.update(enjin.dt),enjin.currentState.render(enjin.dt),enjin.frameID=requestAnimFrame(enjin.loop)},stop:function(){cancelAnimFrame(this.frameID),enjin.currentState.pause&&enjin.currentState.pause()},watchForResize:function(a){window.onresize=a}},enjin.util=a("./libs/util"),enjin.Camera=a("./libs/camera"),enjin.timer=a("./libs/timer"),enjin.collision=a("./libs/collision"),enjin.state=a("./libs/state"),enjin.particle=a("./libs/particle"),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(a){return window.setTimeout(a,enjin.defaultDelay)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(a){clearTimeout(a)},window.performance.now=performance.now||performance.webkitNow||performance.msNow||performance.mozNow||function(){return Date.now()||+new Date}},{"./libs/camera":2,"./libs/collision":3,"./libs/particle":4,"./libs/state":5,"./libs/timer":6,"./libs/util":7}],2:[function(a,b,c){var d=function(a){this.x=a.x||0,this.y=a.y||0,this.scale=a.scale||1,this.rotation=a.rotation||0};d.prototype.attach=function(){var a=enjin.width/(2*this.scale),b=enjin.height/(2*this.scale);enjin.ctx.save(),enjin.ctx.scale(this.scale,this.scale),enjin.ctx.translate(a,b),enjin.ctx.rotate(this.rot),enjin.ctx.translate(-this.x,-this.y)},d.prototype.detach=function(){enjin.ctx.restore()},d.prototype.moveTo=function(a,b){this.x=a,this.y=b},d.prototype.move=function(a,b){this.x=this.x+a,this.y=this.y+b},d.prototype.rotate=function(a){this.rotation=this.rotation+a},d.prototype.rotateTo=function(a){this.rotation=a},d.prototype.scaleBy=function(a){this.scale=this.scale*a},d.prototype.scaleTo=function(a){this.scale=a},d.prototype.scaleToPoint=function(a,b,c){var d=enjin.canvas.width/2-b,e=enjin.canvas.height/2-c,f=d/(this.scale*a)-d/this.scale,g=e/(this.scale*a)-e/this.scale;this.move(f,g),this.scaleBy(a)},d.prototype.toMapCoords=function(a,b){a=(a-this.canvas.getWidth/2)/this.scale,b=(b-this.canvas.getHeight/2)/this.scale;var c=Math.cos(-this.rotation),d=Math.sin(-this.rotation);return a=c*a-d*b,b=d*a+c*b,{x:a+this.x,y:b+this.y}},d.prototype.toCameraCoords=function(a,b){a-=this.x,b-=this.y;var c=Math.cos(this.rotation),d=Math.sin(this.rotation);return a=c*a-d*b,b=d*a+c*b,{x:a*this.scale+this.canvas.getWidth/2,y:b*this.scale+this.canvas.getHeight/2}},b.exports=d},{}],3:[function(a,b,c){var d={};d.AABB=function(a,b,c,d,e,f,g,h){return a<e+g&&a+c>e&&b<f+h&&d+b>f},d.AABBObject=function(a,b){return a.x<b.x+(b.width||b.w)&&a.x+(a.width||a.w)>b.x&&a.y<b.y+(b.height||b.h)&&(a.height||a.h)+a.y>b.y},d.circle=function(a,b,c,d,e,f){return d-a^2+(b-e)^2<=c+f^2},d.circle=function(a,b){return b.x-a.x^2+(a.y-b.y)^2<=(a.radius||a.r)+(b.radius||b.r)^2},b.exports=d},{}],4:[function(a,b,c){var d={};d.Particle=function(a){a.update?this.updateFunc=a.update:(this.lifeTime=a.lifeTime||a.life||5,this.isAlive=!0,this.elapsedTime=0,this.x=a.x||0,this.y=a.y||0,this.velx=a.velx||a.vel||0,this.vely=a.vely||a.vel||0,this.velVariance=a.velVariance||a.variance||.005,this.accelx=a.accelx||a.accel||0,this.accely=a.accely||a.accel||0,this.accelVariance=a.accelVariance||a.variance||.005,this.rotation=a.rotation||0,this.rotationalVelocity=a.rotationalVelocity||a.rotvel||0,this.rotationalVelocityVariance=a.rotationalVelocityVariance||a.rotvelVariance||a.variance||.005,this.rotationalAcceleration=a.rotationalAcceleration||a.rotaccel||0,this.rotationalAccelerationVariance=a.rotationalAcceleration||a.rotaccelVariance||a.variance||.005,this.minVariance=a.minVariance||-.005),this.drawFunc=a.draw||function(a){a.fillRect(this.x,this.y,10,10)}},d.Particle.prototype.update=function(a){this.accelx+=this.accelx*enjin.util.randomDecimal(this.minVariance,this.accelVariance),this.accely+=this.accely*enjin.util.randomDecimal(this.minVariance,this.accelVariance),this.velx+=this.accelx*a,this.vely+=this.accely*a,this.velx+=this.velx*enjin.util.randomDecimal(this.minVariance,this.velVariance),this.vely+=this.vely*enjin.util.randomDecimal(this.minVariance,this.velVariance),this.x+=this.velx*a,this.y+=this.vely*a,this.rotationalAcceleration+=this.rotationalAcceleration*enjin.util.randomDecimal(this.minVariance,this.rotationalAccelerationVariance),this.rotationalVelocity+=this.rotationalAcceleration*a,this.rotationalVelocity+=this.rotationalVelocity*enjin.util.randomDecimal(this.minVariance,this.rotationalVelocityVariance),this.rotation+=this.rotationalVelocity*a,this.elapsedTime+=a,this.elapsedTime>=this.lifeTime&&(this.isAlive=!1)},d.Particle.prototype.draw=function(){enjin.ctx.rotate(this.rotation),this.drawFunc(enjin.ctx),enjin.ctx.rotate(-this.rotation)},d.Emitter=function(a,b,c,d){this.x=a,this.y=b,this.maxAlive=d,this.particleOptions=c,this.particleOptions.x=a,this.particleOptions.y=b,this.aliveParticles=[]},d.Emitter.prototype.update=function(a){for(var b=0;b<this.aliveParticles.length;b++)this.aliveParticles[b].update(a),this.aliveParticles[b].isAlive||this.aliveParticles.splice(b,1);if(this.aliveParticles.length<this.maxAlive)for(var c=enjin.util.random(0,this.maxAlive-this.aliveParticles.length),b=0;b<c;b++)this.aliveParticles.push(new enjin.particle.Particle(this.particleOptions))},d.Emitter.prototype.draw=function(){for(var a=0;a<this.aliveParticles.length;a++)this.aliveParticles[a].draw()},b.exports=d},{}],5:[function(a,b,c){var d={};d.stack=[],d.switch=function(a){enjin.currentState.leave&&enjin.currentState.leave(),a.enter&&a.enter(),enjin.currentState=a},d.push=function(a){this.stack.push(a),enjin.currentState=this.stack[this.stack.length-1]},d.pop=function(){this.stack.pop(),enjin.currentState=this.stack[this.stack.length-1]},b.exports=d},{}],6:[function(a,b,c){var d={};d.Timer=function(a,b,c){this.started=Date.now(),this.duration=a,this.elapsed=0,this.isDone=!1,this.callback=b||function(){},this.updateCallback=c||function(){}},d.Timer.prototype.update=function(a){this.elapsed+=a,this.updateCallback(a),this.elapsed>=this.duration&&this.stop(!0)},d.Timer.prototype.stop=function(a){a&&this.callback(a),this.callback=function(){},this.updateCallback=function(){},this.isDone=!0},d.timers=[],d.updateAll=function(a){for(var b=0;b<this.timers.length;b++)this.timers[b].update(a),this.timers[b].isDone&&this.timers.splice(b,1)},d.after=function(a,b){var c=new this.Timer(a,b);return this.timers.push(c),c},d.during=function(a,b,c){var d=new this.Timer(a,c,b);return this.timers.push(d),d},d.tween=function(a,b,c,d,e){var f="function"==typeof d?d:this._getUpdateFunction(d),g=function(a){this.s=f(Math.min(1,this.elapsed/this.duration)),this.ds=this.s-(this.prevS||0),this.prevS=this.s;for(prop in c)b[prop]+=this.deltas[prop]*this.ds},h=new this.Timer(a,e,g);h.deltas={};for(prop in c)h.deltas[prop]=c[prop]-b[prop];return this.timers.push(h),h},d._getUpdateFunction=function(a){if(this.tweenMethods[a])return this.tweenMethods[a];if("in-out-"===a.substr(0,7)){var b=this.tweenMethods[a.substr(7,a.length)];return this.tweenMethods.chain(b,this.tweenMethods.out(b))}if("out-in-"===a.substr(0,7)){var b=this.tweenMethods[a.substr(7,a.length)];return this.tweenMethods.chain(this.tweenMethods.out(b),b)}if("out-"===a.substr(0,4)){var b=this.tweenMethods[a.substr(4,a.length)];return this.tweenMethods.out(b)}if("in-"===a.substr(0,3)){var b=this.tweenMethods[a.substr(3,a.length)];return b}},d.tweenMethods={linear:function(a){return a},quad:function(a){return a*a},cubic:function(a){return a*a*a},sin:function(a){return 1-Math.cos(a*Math.PI/2)},expo:function(a){return Math.pow(2,10*(a-1))},circ:function(a){return 1-Math.sqrt(1-a*a)},out:function(a){return function(b){return 1-a(1-b)}},chain:function(a,b){return function(c){return.5*(c<.5&&a(2*c)||1+b(2*c-1))}}},b.exports=d},{}],7:[function(a,b,c){var d={};d.random=function(a,b){return Math.floor(Math.random()*(a-b))+b},d.randomDecimal=function(a,b){return Math.random()*(a-b)+b},b.exports=d},{}]},{},[1]);